<dom-module id="generic-entity-summary-card">

    <style include="iron-flex iron-flex-alignment">
         :host {
            display: block;
            /*margin: 10px;*/
        }

        paper-card {
            display: block;
        }

        .role-icon {
            --iron-icon-height: 32px;
            --iron-icon-width: 32px;
            --iron-icon-fill-color: gray;
        }

        .role-name {
            @apply --paper-font-title;
            text-align: right;
            color: gray;
            margin-left: 10px;
        }

        .cicle {
            width: 48px;
            height: 48px;
            -webkit-border-radius: 50%;
            -moz-border-radius: 50%;
            border-radius: 50%;
            color: white;
        }

        paper-progress {
            display: block;
            width: 100%;
        }

        paper-progress.slow {
            --paper-progress-indeterminate-cycle-duration: 5s;
        }

        paper-progress.blue {
            --paper-progress-active-color: var(--paper-blue-500);
            --paper-progress-secondary-color: var(--paper-blue-500);
        }

        .clickable {
            cursor: pointer;
        }
    </style>

    <template>
        <paper-card class="flex">

            <div class="card-content layout vertical center-justified">

                <div class="layout horizontal center">

                    <iron-icon class="role-icon" icon="{{icon}}"></iron-icon>

                    <div class="role-name layout horizontal">
                        <span>{{title}}</span>
                    </div>

                    <div class="flex layout horizontal end-justified">
                        <div class="cicle layout horizontal center center-justified" style$="background: {{color}};">
                            <h2 style="margin: 0;">{{count}}</h2>
                        </div>

                    </div>
                </div>

                <div class="flex">
                    <template is="dom-repeat" items="{{_data}}">

                        <paper-item>
                            <paper-item-body two-line>
                                <div class="header clickable" on-tap="_openItem" href="[[item.url]]">[[item.title]]</div>
                                <div secondary>
                                    <span class="strong">[[item.last_update_user]]</span> -
                                    <moment-element date-time="[[item.last_update_date]]"></moment-element>
                                </div>
                            </paper-item-body>
                        </paper-item>

                    </template>
                </div>

                <template is="dom-if" if="{{_enableViewAll}}">
                    <div class="card-actions layout horizontal">
                        <paper-button on-tap="_viewAll" class="flex">
                            <iron-icon icon="icons:launch"></iron-icon><span class="action-label">VIEW ALL</span></paper-button>
                    </div>
                </template>

            </div>

            <paper-progress hidden="{{!_isDataLoading}}" class="blue slow" indeterminate></paper-progress>

        </paper-card>

    </template>

</dom-module>

<script src="generic-entity-summary-card.js"></script>