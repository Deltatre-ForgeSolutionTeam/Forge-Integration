<link rel="import" href="../search-players/search-players.html">
<link rel="import" href="../player-card/player-card.html">

<dom-module id="injury-report">
    <style include="iron-flex iron-flex-alignment">
         :host {
            display: block;
        }

        .position-row {
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .position-row paper-dropdown-menu,
        .position-row paper-input {
            padding: 10px;
        }

        paper-toast iron-icon {
            color: var(--status-yellow-color);
        }

        .add-player {
            background-color: #eeeeee;
        }
    </style>

    <template>
        <template is="dom-repeat" items="{{value.playersList}}" as="player" index-as="playerIndex">

            <div class="layout horizontal position-row flex">
                
                <player-card player="{{_getPlayerEntity(entity, player)}}" on-delete-player="_deletePlayer"></player-card>

                <div class="layout vertical flex">

                    <paper-input value="{{player.injuryDescription}}" on-input="_onInjuryDescriptionInput" on-change="_onInjuryDescriptionChange"
                        no-label-float="true" label="Injury"></paper-input>

                    <div class="layout horizontal flex">

                        <paper-dropdown-menu label="Monday" class="flex">
                            <paper-listbox slot="dropdown-content" class="dropdown-content" attr-for-selected="value" selected="[[_getDayValue('Monday',playerIndex)]]">
                                <template is="dom-repeat" items="[[injuryDaysStatus.status]]" as="status" player-index="[[playerIndex]]">
                                    <paper-item value="[[status]]" day="Monday" on-tap="_itemSelected">[[status]]</paper-item>
                                </template>
                            </paper-listbox>
                        </paper-dropdown-menu>

                        <paper-dropdown-menu label="Tuesday" class="flex">
                            <paper-listbox slot="dropdown-content" class="dropdown-content" attr-for-selected="value" selected="[[_getDayValue('Tuesday',playerIndex)]]">
                                <template is="dom-repeat" items="[[injuryDaysStatus.status]]" as="status" player-index="[[playerIndex]]">
                                    <paper-item value="[[status]]" day="Tuesday" on-tap="_itemSelected">[[status]]</paper-item>
                                </template>
                            </paper-listbox>
                        </paper-dropdown-menu>

                        <paper-dropdown-menu label="Wednesday" class="flex">
                            <paper-listbox slot="dropdown-content" class="dropdown-content" attr-for-selected="value" selected="[[_getDayValue('Wednesday',playerIndex)]]">
                                <template is="dom-repeat" items="[[injuryDaysStatus.status]]" as="status" player-index="[[playerIndex]]">
                                    <paper-item value="[[status]]" day="Wednesday" on-tap="_itemSelected">[[status]]</paper-item>
                                </template>
                            </paper-listbox>
                        </paper-dropdown-menu>

                    </div>

                    <div class="layout horizontal flex">

                        <paper-dropdown-menu label="Thursday" class="flex">
                            <paper-listbox slot="dropdown-content" class="dropdown-content" attr-for-selected="value" selected="[[_getDayValue('Thursday',playerIndex)]]">
                                <template is="dom-repeat" items="[[injuryDaysStatus.status]]" as="status" player-index="[[playerIndex]]">
                                    <paper-item value="[[status]]" day="Thursday" on-tap="_itemSelected">[[status]]</paper-item>
                                </template>
                            </paper-listbox>
                        </paper-dropdown-menu>

                        <paper-dropdown-menu label="Friday" class="flex">
                            <paper-listbox slot="dropdown-content" class="dropdown-content" attr-for-selected="value" selected="[[_getDayValue('Friday',playerIndex)]]">
                                <template is="dom-repeat" items="[[injuryDaysStatus.status]]" as="status" player-index="[[playerIndex]]">
                                    <paper-item value="[[status]]" day="Friday" on-tap="_itemSelected">[[status]]</paper-item>
                                </template>
                            </paper-listbox>
                        </paper-dropdown-menu>

                        <paper-dropdown-menu label="Saturday" class="flex">
                            <paper-listbox slot="dropdown-content" class="dropdown-content" attr-for-selected="value" selected="[[_getDayValue('Saturday',playerIndex)]]">
                                <template is="dom-repeat" items="[[injuryDaysStatus.status]]" as="status" player-index="[[playerIndex]]">
                                    <paper-item value="[[status]]" day="Saturday" on-tap="_itemSelected">[[status]]</paper-item>
                                </template>
                            </paper-listbox>
                        </paper-dropdown-menu>

                    </div>

                    <paper-dropdown-menu label="Game Status" class="flex">
                        <paper-listbox slot="dropdown-content" class="dropdown-content" attr-for-selected="value" selected="[[_getStatusValue(playerIndex)]]">
                            <template is="dom-repeat" items="[[injuryGameStatus.status]]" as="status" player-index="[[playerIndex]]">
                                <paper-item value="[[status]]" day="game-status" on-tap="_itemSelected">[[status]]</paper-item>
                            </template>
                        </paper-listbox>
                    </paper-dropdown-menu>

                </div>
        </template>

        <div class="add-player layout horizontal">
            <paper-button class="flex" on-tap="_addPlayer">
                <iron-icon icon="add"></iron-icon>
                Add New Player
            </paper-button>
        </div>

        <search-players id="searchPlayers" on-player-selected="_playerSelected"></search-players>

        <paper-toast id="toastWarningPlayerInserted" duration="4000">
            <iron-icon icon="warning"></iron-icon>
            <span class="flex">The player is already inserted in this injury report.</span>
        </paper-toast>


    </template>

    <script src="injury-report.js"></script>
</dom-module>