<link rel="import" href="../search-players/search-players.html">
<link rel="import" href="../player-card/player-card.html">

<dom-module id="injury-report">
    <style include="iron-flex iron-flex-alignment">
         :host {
            display: block;
        }

        paper-toolbar.injury-report-header {
            text-transform: uppercase;
            --paper-toolbar-background: #eee;
            color: #000;
            font-weight: bold;
        }

        .position-row paper-dropdown-menu {
            padding: 10px;
        }
    </style>

    <template>

        <paper-toolbar class="injury-report-header">
            <span slot="top">Players</span>
        </paper-toolbar>

        <template is="dom-repeat" items="{{value.playerList}}" as="player" index-as="playerIndex">

            <div class="layout horizontal position-row">
                <player-card player="[[player]]" on-delete-player="_deletePlayer"></player-card>
                <div class="layout vertical flex">
                    <div class="layout horizontal flex">
                        <paper-dropdown-menu label="Monday" class="flex" >
                            <paper-listbox slot="dropdown-content" class="dropdown-content" attr-for-selected="value" selected="[[_getDayValue('Monday',playerIndex)]]">
                                <template is="dom-repeat" items="[[injuryDaysStatus.status]]" as="status" player-index="[[playerIndex]]">
                                    <paper-item value="[[status]]" day="Monday" on-tap="_itemSelected">[[status]]</paper-item>
                                </template>
                            </paper-listbox>
                        </paper-dropdown-menu>
                        <paper-dropdown-menu label="Tuesday" class="flex">
                            <paper-listbox slot="dropdown-content" class="dropdown-content" attr-for-selected="value" selected="[[_getDayValue('Tuesday',playerIndex)]]">
                                <template is="dom-repeat" items="[[injuryDaysStatus.status]]" as="status" player-index="[[playerIndex]]">
                                    <paper-item value="[[status]]" day="Tuesday" on-tap="_itemSelected">[[status]]</paper-item>
                                </template>
                            </paper-listbox>
                        </paper-dropdown-menu>

                        <paper-dropdown-menu label="Wednesday" class="flex">
                            <paper-listbox slot="dropdown-content" class="dropdown-content" attr-for-selected="value" selected="[[_getDayValue('Wednesday',playerIndex)]]">
                                <template is="dom-repeat" items="[[injuryDaysStatus.status]]" as="status" player-index="[[playerIndex]]">
                                    <paper-item value="[[status]]" day="Wednesday" on-tap="_itemSelected">[[status]]</paper-item>
                                </template>
                            </paper-listbox>
                        </paper-dropdown-menu>
                    </div>
                    <div class="layout horizontal flex">
                        
                        <paper-dropdown-menu label="Thursday" class="flex">
                            <paper-listbox slot="dropdown-content" class="dropdown-content" attr-for-selected="value" selected="[[_getDayValue('Thursday',playerIndex)]]">
                                <template is="dom-repeat" items="[[injuryDaysStatus.status]]" as="status" player-index="[[playerIndex]]" >
                                    <paper-item value="[[status]]" day="Thursday"  on-tap="_itemSelected">[[status]]</paper-item>
                                </template>
                            </paper-listbox>
                        </paper-dropdown-menu>

                        <paper-dropdown-menu label="Friday" class="flex">
                            <paper-listbox slot="dropdown-content" class="dropdown-content" attr-for-selected="value" selected="[[_getDayValue('Friday',playerIndex)]]">
                                <template is="dom-repeat" items="[[injuryDaysStatus.status]]" as="status" player-index="[[playerIndex]]" >
                                    <paper-item value="[[status]]" day="Friday"  on-tap="_itemSelected">[[status]]</paper-item>
                                </template>
                            </paper-listbox>
                        </paper-dropdown-menu>

                        <paper-dropdown-menu label="Saturday" class="flex">
                            <paper-listbox slot="dropdown-content" class="dropdown-content" attr-for-selected="value" selected="[[_getDayValue('Saturday',playerIndex)]]">
                                <template is="dom-repeat" items="[[injuryDaysStatus.status]]" as="status" player-index="[[playerIndex]]"  >
                                    <paper-item value="[[status]]" day="Saturday"  on-tap="_itemSelected">[[status]]</paper-item>
                                </template>
                            </paper-listbox>
                        </paper-dropdown-menu>
                    </div>
                    <paper-dropdown-menu label="Game Status" class="flex">
                        
                        <paper-listbox slot="dropdown-content" class="dropdown-content" attr-for-selected="value" selected="[[_getDayValue('Saturday',playerIndex)]]">
                            <template is="dom-repeat" items="[[injuryGameStatus.status]]" as="status" playerIx="[[playerIndex]]" >
                                <paper-item value="[[status]]" day="game-status"  on-tap="_itemSelected">[[status]]</paper-item>
                            </template>
                        </paper-listbox>
                    </paper-dropdown-menu>
                </div>
        </template>

        <div class="add-player layout horizontal">
            <paper-button class="flex" on-tap="_addPlayer">
                <iron-icon icon="add"></iron-icon>
                Add New Player
            </paper-button>
        </div>

        <search-players id="searchPlayers" on-player-selected="_playerSelected"></search-players>



        <paper-toast id="toastWarningPlayerInserted" duration="4000">
            <iron-icon icon="warning"></iron-icon>
            <span class="flex">The player is already inserted in this injury report.</span>
        </paper-toast>


    </template>



    <script src="injury-report.js"></script>
</dom-module>